<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>3 Introduction to R | Data Analysis for Public Affairs</title>
  <meta name="description" content="3 Introduction to R | Data Analysis for Public Affairs" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="3 Introduction to R | Data Analysis for Public Affairs" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3 Introduction to R | Data Analysis for Public Affairs" />
  
  
  

<meta name="author" content="Jerome Dumortier" />


<meta name="date" content="2021-02-17" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="topics-overview.html"/>
<link rel="next" href="binary-choice.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">dataanalysis</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="topics-overview.html"><a href="topics-overview.html"><i class="fa fa-check"></i><b>2</b> Topics Overview</a></li>
<li class="chapter" data-level="3" data-path="introduction-to-r.html"><a href="introduction-to-r.html"><i class="fa fa-check"></i><b>3</b> Introduction to R</a><ul>
<li class="chapter" data-level="3.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#online-resources-and-help"><i class="fa fa-check"></i><b>3.1</b> Online Resources and Help</a></li>
<li class="chapter" data-level="3.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#opening-rstudio"><i class="fa fa-check"></i><b>3.2</b> Opening RStudio</a><ul>
<li class="chapter" data-level="3.2.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#in-class-exercise-1"><i class="fa fa-check"></i><b>3.2.1</b> In-class Exercise 1</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="introduction-to-r.html"><a href="introduction-to-r.html#functions"><i class="fa fa-check"></i><b>3.3</b> Functions</a></li>
<li class="chapter" data-level="3.4" data-path="introduction-to-r.html"><a href="introduction-to-r.html#data-management"><i class="fa fa-check"></i><b>3.4</b> Data Management</a><ul>
<li class="chapter" data-level="3.4.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#data-in-r"><i class="fa fa-check"></i><b>3.4.1</b> Data in R</a></li>
<li class="chapter" data-level="3.4.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#using-r-as-a-calculator"><i class="fa fa-check"></i><b>3.4.2</b> Using R as a Calculator</a></li>
<li class="chapter" data-level="3.4.3" data-path="introduction-to-r.html"><a href="introduction-to-r.html#creating-a-data-frame-from-scratch"><i class="fa fa-check"></i><b>3.4.3</b> Creating a Data Frame from Scratch</a></li>
<li class="chapter" data-level="3.4.4" data-path="introduction-to-r.html"><a href="introduction-to-r.html#in-class-exercise-2"><i class="fa fa-check"></i><b>3.4.4</b> In-class Exercise 2</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="binary-choice.html"><a href="binary-choice.html"><i class="fa fa-check"></i><b>4</b> Binary Choice</a><ul>
<li class="chapter" data-level="4.1" data-path="binary-choice.html"><a href="binary-choice.html#stuff"><i class="fa fa-check"></i><b>4.1</b> Stuff</a></li>
<li class="chapter" data-level="4.2" data-path="binary-choice.html"><a href="binary-choice.html#including-plots"><i class="fa fa-check"></i><b>4.2</b> Including Plots</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Analysis for Public Affairs</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="introduction-to-r" class="section level1">
<h1><span class="header-section-number">3</span> Introduction to R</h1>
<p>Topics covered in this lecture</p>
<ul>
<li>Introduction to R and RStudio</li>
<li>Data Management</li>
<li>Plotting and Graphs with R</li>
<li>Basic Statistics</li>
</ul>
<p>In-class exercises will be conducted throughout the Lecture.</p>
<div id="online-resources-and-help" class="section level2">
<h2><span class="header-section-number">3.1</span> Online Resources and Help</h2>
<p>Very large user community for R. Google search for ``Some topic R’’ usually leads quickly to the desired help.
Here are the links to a few online tutorials</p>
<ul>
<li><a href="http://stats.idre.ucla.edu/r/">UCLA Institute for Digital Research and Education</a></li>
<li><a href="https://www.statmethods.net/">StatMethods</a></li>
<li><a href="http://www.sthda.com/english/">Statistical tools for high-throughput data analysis</a></li>
</ul>
<p>Two online resources will provide you the solution to the vast majority of your R questions. Getting on those websites is usually the result of a Google search.</p>
<ul>
<li><a href="https://stat.ethz.ch/R-manual/">Statistical Data Analysis R</a>: This resource contains the function manual for R/RStudio including all packages. Example for a function <a href="https://stat.ethz.ch/R-manual/R-devel/library/graphics/html/boxplot.html">boxplot</a>. The most helpful part are the examples at the bottom of the page.</li>
<li>Stack Overflow: Resources for developers. For example, a Google search for “r ggplot two y axis” may give you the following <a href="https://stackoverflow.com/questions/3099219/plot-with-2-y-axes-one-y-axis-on-the-left-and-another-y-axis-on-the-right">result</a> Note that all questions on Stack Overflow have to be accompanied by a re-creatable dataset.</li>
</ul>
<p>Besides many online resources, there are also two useful textbooks</p>
<ul>
<li><a href="https://link.springer.com/book/10.1007/978-0-387-77318-6">Applied Econometrics with R</a> by Christian Kleiber and Achim Zeileis.</li>
<li><a href="https://link.springer.com/book/10.1007/978-0-387-79054-1%5D">Introductory Statistics with R</a> by Peter Dalgaard.</li>
</ul>
<p>An additional online tutorial is <a href="https://cran.r-project.org/doc/contrib/Verzani-SimpleR.pdf%5D">Using R for Introductory Statistics</a> by John Verzani.</p>
</div>
<div id="opening-rstudio" class="section level2">
<h2><span class="header-section-number">3.2</span> Opening RStudio</h2>
<p>Work in RStudio is done in four windows:</p>
<ol style="list-style-type: decimal">
<li>Script Window
<ul>
<li>This is were you type your R Script (.R) and where you execute commands.</li>
<li>Comparable to do-file/editor in Stata.</li>
<li>This window needs to be opened by File <span class="math inline">\(\Rightarrow\)</span> New File <span class="math inline">\(\Rightarrow\)</span> R Script.</li>
</ul></li>
<li>Console window
<ul>
<li>Use of R interactively. Should only be used for quick calculations and not part of an analysis.</li>
</ul></li>
<li>Environment
<ul>
<li>Lists all the variables, data frames, and user-created functions.</li>
<li>It is tempting to use the ``Import Dataset’’ function Don’t.</li>
</ul></li>
<li>Plots/Packages/Help</li>
</ol>
<p>There is a base version of R that allows doing many calculations but the power of R comes through its packages. To use functions associated with a particular package, click ``Install’’ in the packages window of RStudio and type in the name of the package. Or alternatively, use</p>
<ul>
<li><code>install.packages("ggplot2")</code></li>
</ul>
<p>To use a package, you have to activate it by either checking the box in the window “Packages” or by including <code>library(packagename)</code>. Those packages are updated on a regular basis by users.</p>
<p>The <code>\#</code> allows you to include comments in your script file that are not read by R. It is good practice to start any new script with clearing the memory using the command <code>rm(list=ls())</code>. Use the command <code>get()</code> to determine the current working directory or set the new working directory with the command <code>setwd()</code>, e.g., <code>setwd("E:/")</code>. For file paths, replace <span class="math inline">\(\backslash\)</span> with <span class="math inline">\(/\)</span>. Next, you want to load all libraries necessary for your entire script file with the command <code>library()</code>. It is also good practice to save your R-script on a regular basis. The frontmatter, i.e., the top of a R-script file, could look as follows</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="introduction-to-r.html#cb3-1"></a><span class="kw">rm</span>(<span class="dt">list=</span><span class="kw">ls</span>())</span>
<span id="cb3-2"><a href="introduction-to-r.html#cb3-2"></a><span class="kw">load</span>(<span class="st">&quot;DataAnalysisPAData.RData&quot;</span>)</span>
<span id="cb3-3"><a href="introduction-to-r.html#cb3-3"></a><span class="kw">library</span>(openxlsx)</span></code></pre></div>
<div id="in-class-exercise-1" class="section level3">
<h3><span class="header-section-number">3.2.1</span> In-class Exercise 1</h3>
<p>Create a R-script file with the following components:</p>
<ol style="list-style-type: decimal">
<li>Two lines for the title and the date (use #)</li>
<li>Clearing all current contents</li>
<li>Setting the correct working directory
<ul>
<li>This should be a folder to which you have downloaded all materials.</li>
</ul></li>
<li>Installing and loading the package <code>openxlsx</code>.</li>
</ol>
</div>
</div>
<div id="functions" class="section level2">
<h2><span class="header-section-number">3.3</span> Functions</h2>
<p>At the core of R are functions that “do things” based on your input. The basic structure is</p>
<ul>
<li><code>object = functionname(argument1=value,argument2=value,...)</code></li>
</ul>
<p>The structure has the following components</p>
<ul>
<li><code>object</code>: Output of the function will be assigned to object.</li>
<li><code>functionname</code>: Name of the system function. You can also create and use your own functions. More about this later.</li>
<li><code>argument</code>: Arguments are function specific.</li>
<li><code>value</code>: The value you want a particular argument to take.</li>
</ul>
<p>If a function is executed without an specific assignment, the output will be displayed in the console window. Before using a function, read the documentation. Many functions have default settings. Be aware of default values. In most cases, those defaults are set to values that satisfy most uses. For example, consider the help file for the function <a href="https://stat.ethz.ch/R-manual/R-devel/library/stats/html/t.test.html">t.test</a>.</p>
<p>-<code>t.test(x,y=NULL,...,mu=0,conf.level=0.95,...)</code></p>
<p>For this function we have the following default values</p>
<ul>
<li><code>y=NULL</code></li>
<li><code>mu=0</code></li>
<li><code>conf.level=0.95</code></li>
</ul>
</div>
<div id="data-management" class="section level2">
<h2><span class="header-section-number">3.4</span> Data Management</h2>
<div id="data-in-r" class="section level3">
<h3><span class="header-section-number">3.4.1</span> Data in R</h3>
<p>The main data types which can appear in the Environment window of R are:</p>
<ul>
<li>Vectors
<ul>
<li><code>preselection = seq(1788,2016,4)</code></li>
<li><code>midterm = seq(by=4,to=2018,from=1790)</code></li>
</ul></li>
<li>Matrix
<ul>
<li><code>somematrix = matrix(8,10,4)</code></li>
<li>Only numerical values are allowed.</li>
</ul></li>
<li>Data frames
<ul>
<li>By far, the most common data type in R.</li>
<li>Comparable to an Excel sheet.</li>
<li>More on this later.</li>
</ul></li>
<li>Lists
<ul>
<li>Collection of objects from of various types.</li>
<li><code>myfirstlist = list(preselection,midterm,somematrix)</code></li>
</ul></li>
</ul>
</div>
<div id="using-r-as-a-calculator" class="section level3">
<h3><span class="header-section-number">3.4.2</span> Using R as a Calculator</h3>
<p>Entering heights of people and storing it in a vector named :</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="introduction-to-r.html#cb4-1"></a>height =<span class="st"> </span><span class="kw">c</span>(<span class="dv">71</span>,<span class="dv">77</span>,<span class="dv">70</span>,<span class="dv">73</span>,<span class="dv">66</span>,<span class="dv">69</span>,<span class="dv">73</span>,<span class="dv">73</span>,<span class="dv">75</span>,<span class="dv">76</span>)</span></code></pre></div>
<p>Calculating the sum, product, natural log, mean, and (element-wise) squaring is done with the following commands:</p>
<ul>
<li><code>sum(height)</code></li>
<li><code>prod(height)</code></li>
<li><code>log(height)</code> # Default is the natural log</li>
<li><code>meanheight = mean(height)</code></li>
<li><code>heightsq = height^2</code></li>
</ul>
<p>Removing (i.e., deleting) unused elements: <code>rm(heightsq,meanheight)</code></p>
</div>
<div id="creating-a-data-frame-from-scratch" class="section level3">
<h3><span class="header-section-number">3.4.3</span> Creating a Data Frame from Scratch</h3>
<p>Data frames are the most commonly used tables in R/RStudio. They are similar to an Excel sheet.</p>
<ul>
<li>Column names represent the variables and rows represent observations.</li>
<li>Column names must be unique and without spaces.</li>
</ul>
<p>Suggestion: Use only lower-case variable names and objects.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="introduction-to-r.html#cb5-1"></a>studentid       =<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">10</span></span>
<span id="cb5-2"><a href="introduction-to-r.html#cb5-2"></a>studentnames    =<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Andrew&quot;</span>,<span class="st">&quot;Linda&quot;</span>,<span class="st">&quot;William&quot;</span>,<span class="st">&quot;Daniel&quot;</span>,<span class="st">&quot;Gina&quot;</span>,</span>
<span id="cb5-3"><a href="introduction-to-r.html#cb5-3"></a>                    <span class="st">&quot;Mick&quot;</span>,<span class="st">&quot;Sonny&quot;</span>,<span class="st">&quot;Wilbur&quot;</span>,<span class="st">&quot;Elisabeth&quot;</span>,<span class="st">&quot;James&quot;</span>)</span>
<span id="cb5-4"><a href="introduction-to-r.html#cb5-4"></a>students        =<span class="st"> </span><span class="kw">data.frame</span>(studentid,studentnames,height)</span>
<span id="cb5-5"><a href="introduction-to-r.html#cb5-5"></a><span class="kw">rm</span>(studentid,height,studentnames)</span></code></pre></div>
</div>
<div id="in-class-exercise-2" class="section level3">
<h3><span class="header-section-number">3.4.4</span> In-class Exercise 2</h3>
<p>Create a data frame called <code>students</code> containing the following information:</p>
<table>
<thead>
<tr class="header">
<th align="left">Name</th>
<th align="right">Economics</th>
<th align="right">English</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Mindy</td>
<td align="right">80.0</td>
<td align="right">52.5</td>
</tr>
<tr class="even">
<td align="left">Gregory</td>
<td align="right">60.0</td>
<td align="right">60.0</td>
</tr>
<tr class="odd">
<td align="left">Shubra</td>
<td align="right">95.0</td>
<td align="right">77.5</td>
</tr>
<tr class="even">
<td align="left">Keith</td>
<td align="right">77.5</td>
<td align="right">30.0</td>
</tr>
<tr class="odd">
<td align="left">Louisa</td>
<td align="right">97.5</td>
<td align="right">95.0</td>
</tr>
</tbody>
</table>
<p>Notes:
- Use  as the column header for the students’ names.
- Once you have created the data frame, remove the unused vectors.</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="topics-overview.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="binary-choice.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/jrfdumortier/dataanalysis/edit/master/introductiontor.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/jrfdumortier/dataanalysis/blob/master/introductiontor.Rmd",
"text": null
},
"download": ["bookdownproj.pdf"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
